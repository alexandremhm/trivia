(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},111:function(e,t,a){e.exports=a.p+"static/media/pablita-530.245ec5e3.png"},114:function(e,t,a){e.exports=a(219)},119:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},134:function(e,t){},136:function(e,t){},169:function(e,t){},170:function(e,t){},176:function(e,t){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),i=a.n(c),o=(a(119),a(22)),s=a(12),u=a(6),l=a(109),d=a.n(l),m=a(23),b=a.n(m),h=a(47),p=a(7),f=a(8),v=a(10),g=a(9),E=a(4),O=a(11),k=function(e){return{type:"REQUEST_TOKEN",payload:e}},y=a(49),N=function(e,t){localStorage.removeItem("state");var a={player:{name:e,gravatarEmail:t,assertions:0,score:0}};localStorage.setItem("state",JSON.stringify(a))},j=function(e){return JSON.parse(localStorage.getItem(e))},S=function(e,t,a){var n=j("ranking")||[],r=[].concat(Object(y.a)(n),[{name:e,score:t,picture:a}]);localStorage.setItem("ranking",JSON.stringify(r))},C=(a(125),function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("div",{className:"box loginForm-div"},r.a.createElement("div",{className:"field columns"},r.a.createElement("label",{htmlFor:"input-name",className:"label"},r.a.createElement("div",{className:"control has-icons-left has-icons-right column is-full"},r.a.createElement("input",{className:"input is-link",type:"text",placeholder:"Digite seu nome",id:"input-name",onChange:function(t){return e(t)},"data-testid":"input-player-name",name:"name"})))),r.a.createElement("div",{className:"field columns"},r.a.createElement("label",{htmlFor:"input-email",className:"label"},r.a.createElement("div",{className:"control has-icons-left has-icons-right column is-full"},r.a.createElement("input",{className:"input is-link",type:"email",placeholder:"Digite seu email",id:"input-email",onChange:function(t){return e(t)},name:"email","data-testid":"input-gravatar-email"})))))}}]),t}(n.Component)),w=(a(126),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={disabled:!0,email:"",name:"",ready:!1},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.checkInputs=e.checkInputs.bind(Object(E.a)(e)),e.handleLogin=e.handleLogin.bind(Object(E.a)(e)),e}return Object(O.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(h.a)({},n,r),(function(){t.checkInputs()}))}},{key:"handleLocalStorage",value:function(){var e,t=this.props.token;e=t,localStorage.setItem("token",JSON.stringify(e))}},{key:"handleLogin",value:function(){var e,t,a,n,r,c,i,o;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.state,t=e.name,a=e.email,n=this.props,r=n.initToken,c=n.setLogin,i=n.getQuestions,N(t,a),s.next=5,b.a.awrap(r());case 5:return o=this.props.token,this.handleLocalStorage(),s.next=9,b.a.awrap(i(o));case 9:c(t,a),this.setState({ready:!0});case 11:case"end":return s.stop()}}),null,this)}},{key:"checkInputs",value:function(){var e=this.state,t=e.email,a=e.name;t.length>0&&a.length>0?this.setState({disabled:!1}):this.setState({disabled:!0})}},{key:"redirectSettings",value:function(){window.location="configuracao"}},{key:"render",value:function(){var e=this,t=this.state,a=t.disabled,n=t.ready;return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form"},r.a.createElement(C,{handleChange:this.handleChange}),r.a.createElement("button",{type:"button",onClick:this.handleLogin,"data-testid":"btn-play",disabled:a,className:"login-btn button"},"Jogar"),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:function(){return e.redirectSettings()},className:"login-btn button"},"Configura\xe7\xf5es")),n&&r.a.createElement(u.a,{to:"/game"}))}}]),t}(n.Component));w.defaultProps={token:""};var Q=Object(s.b)((function(e){return{token:e.loginReducer.token}}),(function(e){return{initToken:function(){return e((function(e){return e(k),fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(t){return e({type:"REQUEST_TOKEN_SUCCESS",payload:t})})).catch((function(t){return e({type:"REQUEST_TOKEN_ERROR",payload:t})}))}))},setLogin:function(t,a){return e({type:"LOGIN",payload:{name:t,email:a}})},getQuestions:function(t){return e(function(e){return function(t){var a;return t({type:"REQUEST_QUESTIONS",payload:a}),fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"REQUEST_QUESTIONS_SUCCESS",payload:e}}(e))}))}}(t))}}}))(w),x=a(48),I=a.n(x),q=function(e){return fetch("https://www.gravatar.com/avatar/".concat(e)).then((function(e){return e.url}))},A=(a(213),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={},e.setAvatar=e.setAvatar.bind(Object(E.a)(e)),e}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props.email,t=I()(e).toString(),n.next=4,b.a.awrap(q(t));case 4:a=n.sent,this.setAvatar(a);case 6:case"end":return n.stop()}}),null,this)}},{key:"setAvatar",value:function(e){this.setState({url:e})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=this.state.url;return r.a.createElement("header",{className:"headerGame"},r.a.createElement("div",{className:"headerGame-img"},r.a.createElement("img",{src:n,alt:"avatar","data-testid":"header-profile-picture"})),r.a.createElement("div",{className:"headerGame-info"},r.a.createElement("h3",{"data-testid":"header-player-name"},t),r.a.createElement("h4",{"data-testid":"header-score"},"Score: ".concat(a))))}}]),t}(n.Component)),T=Object(s.b)((function(e){var t=e.loginReducer,a=e.gameReducer;return{email:t.email,name:t.name,score:a.score,currentQuestion:a.currentQuestion}}))(A),R=(a(214),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={nextIsDisabled:!0,redirectToFeedback:!1,isAnswered:!1},e.handleClick=e.handleClick.bind(Object(E.a)(e)),e.handleDisabledButton=e.handleDisabledButton.bind(Object(E.a)(e)),e.handleNextQuestion=e.handleNextQuestion.bind(Object(E.a)(e)),e.returnNextButton=e.returnNextButton.bind(Object(E.a)(e)),e.calculateScore=e.calculateScore.bind(Object(E.a)(e)),e.handleLocalStorage=e.handleLocalStorage.bind(Object(E.a)(e)),e}return Object(O.a)(t,e),Object(f.a)(t,[{key:"handleNextQuestion",value:function(){var e=this,t=this.props,a=t.nextQuestion,n=t.currentQuestion,r=t.reset;this.setState({nextIsDisabled:!0,isAnswered:!1},(function(){4===n&&e.setState({redirectToFeedback:!0}),a(),r()}))}},{key:"handleDisabledButton",value:function(){this.setState({nextIsDisabled:!1})}},{key:"handleClick",value:function(){(0,this.props.clearInterval)(),this.handleDisabledButton(),this.setState({isAnswered:!0})}},{key:"handleLocalStorage",value:function(e){(0,this.props.addNewScore)(e),function(e){var t=j("state")||{player:{score:0}};t.player.score+=e,localStorage.setItem("state",JSON.stringify(t))}(e),function(){var e=j("state")||{player:{assertions:0}};e.player.assertions+=1,localStorage.setItem("state",JSON.stringify(e))}()}},{key:"calculateScore",value:function(){var e=this.props,t=e.count,a=1,n=2,r=3,c=10;switch(e.question.difficulty){case"easy":var i=c+Number(t)*a;this.handleLocalStorage(i);break;case"medium":var o=c+Number(t)*n;this.handleLocalStorage(o);break;case"hard":var s=c+Number(t)*r;this.handleLocalStorage(s)}}},{key:"returnNextButton",value:function(){return r.a.createElement("button",{type:"button",onClick:this.handleNextQuestion,"data-testid":"btn-next",className:"next-btn button"},"PR\xd3XIMA")}},{key:"render",value:function(){var e=this,t=this.state,a=t.nextIsDisabled,n=t.redirectToFeedback,c=t.isAnswered,i=this.props,o=i.question,s=o.category,l=o.question,d=o.correct_answer,m=o.incorrect_answers,b=i.disabled;return r.a.createElement("div",{className:"question-container"},r.a.createElement("div",{className:"question-header"},n&&r.a.createElement(u.a,{to:"/feedback"}),r.a.createElement("p",{id:"question-text","data-testid":"question-text"},l),r.a.createElement("p",{id:"category","data-testid":"question-category"},"Category: ".concat(s))),r.a.createElement("div",{className:"question-btn-container"},r.a.createElement("button",{type:"button","data-testid":"correct-answer",className:c?"button question-btn correct-color":"button question-btn",onClick:function(){e.calculateScore(),e.handleClick()},disabled:b},d),m.map((function(t,a){return r.a.createElement("button",{type:"button",key:a,"data-testid":"wrong-answer",className:c?"button question-btn wrong-color":"button question-btn",onClick:e.handleClick,disabled:b},t)}))),r.a.createElement("div",{className:"next-btn-container"},b||!a?this.returnNextButton():null))}}]),t}(n.Component)),_=Object(s.b)((function(e){return{currentQuestion:e.gameReducer.currentQuestion}}),(function(e){return{nextQuestion:function(){return e({type:"NEXT_QUESTION"})},addNewScore:function(t){return e(function(e){return{type:"ADD_SCORE",payload:e}}(t))}}}))(R),L=(a(215),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={count:30,disabled:!1},e.counter=e.counter.bind(Object(E.a)(e)),e.counterFunc=e.counterFunc.bind(Object(E.a)(e)),e.resetCounter=e.resetCounter.bind(Object(E.a)(e)),e.clearCounterInterval=e.clearCounterInterval.bind(Object(E.a)(e)),e}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.counter()}},{key:"resetCounter",value:function(){this.setState({count:30,disabled:!1}),this.counter()}},{key:"counterFunc",value:function(){var e=this.state.count;e>0?this.setState({count:e-1}):0===e&&(this.clearCounterInterval(),this.setState({count:0,disabled:!0}))}},{key:"clearCounterInterval",value:function(){clearInterval(this.interval)}},{key:"counter",value:function(){this.interval=setInterval(this.counterFunc,1e3)}},{key:"render",value:function(){var e=this.props,t=e.questionArray,a=e.currentQuestion,n=this.state,c=n.disabled,i=n.count;return 0===t.length?r.a.createElement("h1",null,"loading..."):r.a.createElement("div",{className:"game-container"},r.a.createElement(T,null),r.a.createElement(_,{count:i,counter:this.counter,clearInterval:this.clearCounterInterval,reset:this.resetCounter,question:t[a],disabled:c}),r.a.createElement("div",{className:"game-counter"},i))}}]),t}(n.Component));L.defaultProps={questionArray:[],currentQuestion:0};var U=Object(s.b)((function(e){var t=e.gameReducer;return{questionArray:t.questions,currentQuestion:t.currentQuestion}}))(L),D=(a(216),a(111)),G=a.n(D),B=function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"configuration-container"},r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"settings-title"},"Configura\xe7\xf5es"),r.a.createElement("img",{className:"construction-img",src:G.a,alt:"Em constru\xe7\xe3o"})),r.a.createElement(o.b,{to:"/",className:"button question-btn","data-testid":"btn-go-home",basename:"/trivia"},"Voltar para a tela inical"))}}]),t}(n.Component),F=(a(217),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={},e.resultQuestions=e.resultQuestions.bind(Object(E.a)(e)),e.setAvatar=e.setAvatar.bind(Object(E.a)(e)),e}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r,c,i;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.email,a=e.score,n=e.name,r=I()(t).toString(),o.next=4,b.a.awrap(q(r));case 4:c=o.sent,this.setAvatar(c),i=this.state.url,S(n,a,i);case 8:case"end":return o.stop()}}),null,this)}},{key:"setAvatar",value:function(e){this.setState({url:e})}},{key:"resultQuestions",value:function(){return this.props.questions>=3?r.a.createElement("p",{"data-testid":"feedback-text"},"Mandou bem!"):r.a.createElement("p",{"data-testid":"feedback-text"},"Podia ser melhor...")}},{key:"render",value:function(){var e=this.props,t=e.score,a=e.questions,n=e.prepareNewGame;return r.a.createElement("div",{className:"feedback-container"},r.a.createElement(T,null),r.a.createElement("div",{className:"feedback-wrapper"},r.a.createElement("div",{className:"feedback-message"},this.resultQuestions()),r.a.createElement("div",{className:"feedback-score"},r.a.createElement("p",{"data-testid":"feedback-total-score"},"Score: ".concat(t)),r.a.createElement("p",{"data-testid":"feedback-total-question"},"Quest\xf5es acertadas: ".concat(a)))),r.a.createElement(o.b,{"data-testid":"btn-play-again",className:"button question-btn feedback-btn",to:"/",onClick:function(){return n()}},"Jogar novamente"),r.a.createElement(o.b,{"data-testid":"btn-ranking",to:"/ranking",className:"button question-btn feedback-btn"},"Ver Ranking"))}}]),t}(n.Component)),J=Object(s.b)((function(e){var t=e.gameReducer,a=e.loginReducer;return{questions:t.correctAnswers,score:t.score,email:a.email,name:a.name}}),(function(e){return{prepareNewGame:function(){return e({type:"NEW_GAME"})}}}))(F),M=(a(218),function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.prepareNewGame,t=j("ranking").sort((function(e,t){return t.score-e.score}));return r.a.createElement("div",{className:"ranking-container"},r.a.createElement("h1",{className:"ranking-title","data-testid":"ranking-title"},"Ranking"),t.map((function(e,t){var a=e.name,n=e.score,c=e.picture;return r.a.createElement("div",{className:"ranking-wrapper",key:t},r.a.createElement("div",{className:"ranking-img"},r.a.createElement("img",{src:c,alt:"player"})),r.a.createElement("div",{className:"ranking-info"},r.a.createElement("p",{className:"ranking-name","data-testid":"player-name-".concat(t)},a),r.a.createElement("p",{className:"ranking-score","data-testid":"player-score-".concat(t)},"Score: ".concat(n))))})),r.a.createElement(o.b,{to:"/",className:"button question-btn","data-testid":"btn-go-home",onClick:function(){return e()}},"Voltar para a tela inical"))}}]),t}(n.Component)),W=Object(s.b)(null,(function(e){return{prepareNewGame:function(){return e({type:"NEW_GAME"})}}}))(M);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(28),P=a(112),V=a(113),X=a(15),$={token:{},isLoading:!1,name:"",email:""},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REQUEST_TOKEN":return Object(X.a)({},e,{isLoading:!0});case"REQUEST_TOKEN_SUCCESS":return Object(X.a)({},e,{isLoading:!1,token:n.token});case"LOGIN":return Object(X.a)({},e,{name:n.name,email:n.email});default:return Object(X.a)({},e)}},H={questions:[],isLoading:!1,score:0,correctAnswers:0,currentQuestion:0},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REQUEST_QUESTIONS":return Object(X.a)({},e,{isLoading:!0});case"REQUEST_QUESTIONS_SUCCESS":return Object(X.a)({},e,{isLoading:!1,questions:Object(y.a)(n.results)});case"ADD_SCORE":return Object(X.a)({},e,{score:e.score+n,correctAnswers:e.correctAnswers+1});case"NEXT_QUESTION":var r=4;return e.currentQuestion===r?Object(X.a)({},e):Object(X.a)({},e,{currentQuestion:e.currentQuestion+1});case"NEW_GAME":return Object(X.a)({},e,{questions:[],isLoading:!1,score:0,correctAnswers:0,currentQuestion:0});default:return Object(X.a)({},e)}},Z=Object(K.combineReducers)({loginReducer:z,gameReducer:Y}),ee=Object(K.createStore)(Z,Object(P.composeWithDevTools)(Object(K.applyMiddleware)(V.a)));i.a.render(r.a.createElement(s.a,{store:ee},r.a.createElement(o.a,{basename:"/trivia"},r.a.createElement((function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"})),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:Q}),r.a.createElement(u.b,{path:"/game",component:U}),r.a.createElement(u.b,{path:"/configuracao",component:B}),r.a.createElement(u.b,{path:"/feedback",component:J}),r.a.createElement(u.b,{path:"/ranking",component:W})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[114,1,2]]]);
//# sourceMappingURL=main.c4015017.chunk.js.map